{
 "name": "fabric-contract",
 "description": " ",
 "version": "1.0.0",
 "type": "flogo:app",
 "appModel": "1.0.0",
 "resources": [
  {
   "id": "flow:Put_Record",
   "data": {
    "name": "Put Record",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage",
      "name": "LogMessage",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/log",
       "input": {
        "flowInfo": "false",
        "addToFlow": "false"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"received put_record user_txn_id: \", $flow.parameters.user_txn_id, \"; secret: \", $flow.parameters.transient.secret, \"; txn_id: \", $flow.txID)"
         }
        ]
       }
      }
     },
     {
      "id": "Return",
      "name": "Return",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['returns']['txn_id']",
          "type": "assign",
          "value": "$flow.txID"
         },
         {
          "mapTo": "$INPUT['returns']['txn_time']",
          "type": "assign",
          "value": "$flow.txTime"
         },
         {
          "mapTo": "$INPUT['returns']['user_txn_id']",
          "type": "assign",
          "value": "$flow.parameters.user_txn_id"
         },
         {
          "mapTo": "$INPUT['returns']['data']",
          "type": "assign",
          "value": "$flow.parameters.data"
         },
         {
          "mapTo": "$INPUT['returns']['hash_type']",
          "type": "assign",
          "value": "$flow.parameters.hash_type"
         },
         {
          "mapTo": "$INPUT['returns']['hash_value']",
          "type": "assign",
          "value": "$flow.parameters.hash_value"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage",
      "to": "Return",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "parameters",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"},\"pin\":{\"type\":\"number\"}}}}"
       }
      },
      {
       "name": "txID",
       "type": "string"
      },
      {
       "name": "txTime",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "returns",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}"
       }
      }
     ]
    }
   }
  },
  {
   "id": "flow:Put_Records",
   "data": {
    "name": "Put Records",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage1",
      "name": "LogMessage1",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/log",
       "input": {
        "flowInfo": "false",
        "addToFlow": "false"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"received put_records user_txn_id: \", $flow.parameters.records[0].user_txn_id, \"; secret: \", $flow.parameters.transient.secret, \"; txn_id: \", $flow.txID)"
         }
        ]
       }
      }
     },
     {
      "id": "Return1",
      "name": "Return1",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['returns']",
          "type": "array",
          "value": "{\"to\":\"$INPUT['returns']\",\"from\":\"$flow.parameters.records\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['txn_id']\",\"from\":\"$flow.txID\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['txn_time']\",\"from\":\"$flow.txTime\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_type']\",\"from\":\"SHA256\",\"type\":\"literal\"},{\"to\":\"$INPUT.$$['hash_value']\",\"from\":\"hash-generated\",\"type\":\"literal\"}]}"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage1",
      "to": "Return1",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "parameters",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"}}}},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"}}}}"
       }
      },
      {
       "name": "txID",
       "type": "string"
      },
      {
       "name": "txTime",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "returns",
       "type": "array"
      }
     ]
    }
   }
  }
 ],
 "triggers": [
  {
   "ref": "github.com/yxuco/flogo-enterprise-app/fabric/trigger/transaction",
   "name": "HyperledgerFabricTransaction",
   "description": "",
   "settings": {},
   "id": "HyperledgerFabricTransaction",
   "handlers": [
    {
     "description": "",
     "settings": {
      "name": "put_record",
      "validation": false
     },
     "outputs": {
      "parameters": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"},\"pin\":{\"type\":\"number\"}}}}}",
       "value": ""
      },
      "txID": "",
      "txTime": "",
      "_chaincode_stub": ""
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:Put_Record"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['parameters']['user_txn_id']",
         "type": "assign",
         "value": "$.parameters.user_txn_id"
        },
        {
         "mapTo": "$INPUT['parameters']['data']",
         "type": "assign",
         "value": "$.parameters.data"
        },
        {
         "mapTo": "$INPUT['parameters']['hash_type']",
         "type": "assign",
         "value": "$.parameters.hash_type"
        },
        {
         "mapTo": "$INPUT['parameters']['hash_value']",
         "type": "assign",
         "value": "$.parameters.hash_value"
        },
        {
         "mapTo": "$INPUT['parameters']['transient']['secret']",
         "type": "assign",
         "value": "$.parameters.transient.secret"
        },
        {
         "mapTo": "$INPUT['parameters']['transient']['pin']",
         "type": "assign",
         "value": "$.parameters.transient.pin"
        },
        {
         "mapTo": "$INPUT['txID']",
         "type": "assign",
         "value": "$.txID"
        },
        {
         "mapTo": "$INPUT['txTime']",
         "type": "assign",
         "value": "$.txTime"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['returns']['txn_id']",
         "type": "assign",
         "value": "$.returns.txn_id"
        },
        {
         "mapTo": "$INPUT['returns']['txn_time']",
         "type": "assign",
         "value": "$.returns.txn_time"
        },
        {
         "mapTo": "$INPUT['returns']['user_txn_id']",
         "type": "assign",
         "value": "$.returns.user_txn_id"
        },
        {
         "mapTo": "$INPUT['returns']['data']",
         "type": "assign",
         "value": "$.returns.data"
        },
        {
         "mapTo": "$INPUT['returns']['hash_type']",
         "type": "assign",
         "value": "$.returns.hash_type"
        },
        {
         "mapTo": "$INPUT['returns']['hash_value']",
         "type": "assign",
         "value": "$.returns.hash_value"
        }
       ]
      }
     }
    },
    {
     "description": "",
     "settings": {
      "name": "put_records",
      "validation": false
     },
     "outputs": {
      "parameters": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"}}}},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"}}}}}",
       "value": ""
      },
      "txID": "",
      "txTime": "",
      "_chaincode_stub": ""
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:Put_Records"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['parameters']['records']",
         "type": "array",
         "value": "{\"to\":\"$INPUT['parameters']['records']\",\"from\":\"$.parameters.records\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"}]}"
        },
        {
         "mapTo": "$INPUT['parameters']['transient']['secret']",
         "type": "assign",
         "value": "$.parameters.transient.secret"
        },
        {
         "mapTo": "$INPUT['txID']",
         "type": "assign",
         "value": "$.txID"
        },
        {
         "mapTo": "$INPUT['txTime']",
         "type": "assign",
         "value": "$.txTime"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['returns']",
         "type": "array",
         "value": "{\"to\":\"$INPUT['returns']\",\"from\":\"$.returns\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['txn_id']\",\"from\":\"$.txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['txn_time']\",\"from\":\"$.txn_time\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_type']\",\"from\":\"$.hash_type\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_value']\",\"from\":\"$.hash_value\",\"type\":\"assign\"}]}"
        }
       ]
      }
     }
    }
   ]
  }
 ],
 "properties": [],
 "ui": "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",
 "contrib": "W3sicmVmIjoiZ2l0aHViLmNvbS95eHVjby9mbG9nby1lbnRlcnByaXNlLWFwcC9mYWJyaWMiLCJzM2xvY2F0aW9uIjoie1VTRVJJRH0vZmFicmljIn0seyJyZWYiOiJnaXRodWIuY29tL1RJQkNPU29mdHdhcmUvZmxvZ28tY29udHJpYi9hY3Rpdml0eS9sb2ciLCJzM2xvY2F0aW9uIjoie1VTRVJJRH0vRGVmYXVsdC9hY3Rpdml0eS9sb2cifV0="
}