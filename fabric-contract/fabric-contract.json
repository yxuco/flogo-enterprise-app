{
 "name": "fabric-contract",
 "description": " ",
 "version": "1.0.0",
 "type": "flogo:app",
 "appModel": "1.0.0",
 "resources": [
  {
   "id": "flow:Put_Record",
   "data": {
    "name": "Put Record",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage",
      "name": "LogMessage",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/log",
       "input": {
        "flowInfo": "false",
        "addToFlow": "false"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"Received user_txn_id: \", $flow.parameters.user_txn_id, \"; secret: \", $flow.parameters.transient.secret, \"; txn_id: \", $flow.txID)"
         }
        ]
       }
      }
     },
     {
      "id": "Return",
      "name": "Return",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['returns']['txn_id']",
          "type": "assign",
          "value": "$flow.txID"
         },
         {
          "mapTo": "$INPUT['returns']['txn_time']",
          "type": "assign",
          "value": "$flow.txTime"
         },
         {
          "mapTo": "$INPUT['returns']['user_txn_id']",
          "type": "assign",
          "value": "$flow.parameters.user_txn_id"
         },
         {
          "mapTo": "$INPUT['returns']['data']",
          "type": "assign",
          "value": "$flow.parameters.data"
         },
         {
          "mapTo": "$INPUT['returns']['hash_type']",
          "type": "assign",
          "value": "$flow.parameters.hash_type"
         },
         {
          "mapTo": "$INPUT['returns']['hash_value']",
          "type": "assign",
          "value": "$flow.parameters.hash_value"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage",
      "to": "Return",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "parameters",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"}}}}"
       }
      },
      {
       "name": "txID",
       "type": "string"
      },
      {
       "name": "txTime",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "returns",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"txn_id\":{\"type\":\"string\"},\"txn_time\":{\"type\":\"string\"},\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}"
       }
      }
     ]
    }
   }
  },
  {
   "id": "flow:Put_Records",
   "data": {
    "name": "Put Records",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage1",
      "name": "LogMessage1",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/log",
       "input": {
        "flowInfo": "false",
        "addToFlow": "false"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"received put_records user_txn_id: \", $flow.parameters.records[0].user_txn_id, \"; secret: \", $flow.parameters.transient.secret, \"; txn_id: \", $flow.txID)"
         }
        ]
       }
      }
     },
     {
      "id": "Return1",
      "name": "Return1",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['returns']",
          "type": "array",
          "value": "{\"to\":\"$INPUT['returns']\",\"from\":\"$flow.parameters.records\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['txn_id']\",\"from\":\"$flow.txID\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['txn_time']\",\"from\":\"$flow.txTime\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_type']\",\"from\":\"SHA256\",\"type\":\"literal\"},{\"to\":\"$INPUT.$$['hash_value']\",\"from\":\"hash-generated\",\"type\":\"literal\"}]}"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage1",
      "to": "Return1",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "parameters",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"}}}},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"}}}}"
       }
      },
      {
       "name": "txID",
       "type": "string"
      },
      {
       "name": "txTime",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "returns",
       "type": "array"
      }
     ]
    }
   }
  }
 ],
 "triggers": [
  {
   "ref": "github.com/yxuco/flogo-enterprise-app/fabric/trigger/transaction",
   "name": "HyperledgerFabricTransaction",
   "description": "",
   "settings": {},
   "id": "HyperledgerFabricTransaction",
   "handlers": [
    {
     "description": "",
     "settings": {
      "name": "put_record",
      "validation": false
     },
     "outputs": {
      "parameters": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"}}}}}",
       "value": ""
      },
      "txID": "",
      "txTime": "",
      "_chaincode_stub": ""
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:Put_Record"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['parameters']['transient']['secret']",
         "type": "assign",
         "value": "$.parameters.transient.secret"
        },
        {
         "mapTo": "$INPUT['parameters']['user_txn_id']",
         "type": "assign",
         "value": "$.parameters.user_txn_id"
        },
        {
         "mapTo": "$INPUT['parameters']['data']",
         "type": "assign",
         "value": "$.parameters.data"
        },
        {
         "mapTo": "$INPUT['parameters']['hash_type']",
         "type": "assign",
         "value": "$.parameters.hash_type"
        },
        {
         "mapTo": "$INPUT['parameters']['hash_value']",
         "type": "assign",
         "value": "$.parameters.hash_value"
        },
        {
         "mapTo": "$INPUT['txID']",
         "type": "assign",
         "value": "$.txID"
        },
        {
         "mapTo": "$INPUT['txTime']",
         "type": "assign",
         "value": "$.txTime"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['returns']['txn_id']",
         "type": "assign",
         "value": "$.returns.txn_id"
        },
        {
         "mapTo": "$INPUT['returns']['txn_time']",
         "type": "assign",
         "value": "$.returns.txn_time"
        },
        {
         "mapTo": "$INPUT['returns']['user_txn_id']",
         "type": "assign",
         "value": "$.returns.user_txn_id"
        },
        {
         "mapTo": "$INPUT['returns']['data']",
         "type": "assign",
         "value": "$.returns.data"
        },
        {
         "mapTo": "$INPUT['returns']['hash_type']",
         "type": "assign",
         "value": "$.returns.hash_type"
        },
        {
         "mapTo": "$INPUT['returns']['hash_value']",
         "type": "assign",
         "value": "$.returns.hash_value"
        }
       ]
      }
     }
    },
    {
     "description": "",
     "settings": {
      "name": "put_records",
      "validation": false
     },
     "outputs": {
      "parameters": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"}}}},\"transient\":{\"type\":\"object\",\"properties\":{\"secret\":{\"type\":\"string\"}}}}}",
       "value": ""
      },
      "txID": "",
      "txTime": "",
      "_chaincode_stub": ""
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:Put_Records"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['parameters']['records']",
         "type": "array",
         "value": "{\"to\":\"$INPUT['parameters']['records']\",\"from\":\"$.parameters.records\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"}]}"
        },
        {
         "mapTo": "$INPUT['parameters']['transient']['secret']",
         "type": "assign",
         "value": "$.parameters.transient.secret"
        },
        {
         "mapTo": "$INPUT['txID']",
         "type": "assign",
         "value": "$.txID"
        },
        {
         "mapTo": "$INPUT['txTime']",
         "type": "assign",
         "value": "$.txTime"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['returns']",
         "type": "array",
         "value": "{\"to\":\"$INPUT['returns']\",\"from\":\"$.returns\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['txn_id']\",\"from\":\"$.txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['txn_time']\",\"from\":\"$.txn_time\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_type']\",\"from\":\"$.hash_type\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_value']\",\"from\":\"$.hash_value\",\"type\":\"assign\"}]}"
        }
       ]
      }
     }
    }
   ]
  }
 ],
 "properties": [],
 "ui": "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",
 "contrib": "W3sicmVmIjoiZ2l0aHViLmNvbS95eHVjby9mbG9nby1lbnRlcnByaXNlLWFwcC9mYWJyaWMiLCJzM2xvY2F0aW9uIjoie1VTRVJJRH0vZmFicmljIn0seyJyZWYiOiJnaXRodWIuY29tL1RJQkNPU29mdHdhcmUvZmxvZ28tY29udHJpYi9hY3Rpdml0eS9sb2ciLCJzM2xvY2F0aW9uIjoie1VTRVJJRH0vRGVmYXVsdC9hY3Rpdml0eS9sb2cifV0="
}