{
 "name": "fabric-contract",
 "description": " ",
 "version": "1.0.0",
 "type": "flogo:app",
 "appModel": "1.0.0",
 "resources": [
  {
   "id": "flow:put_record",
   "data": {
    "name": "put_record",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage",
      "name": "LogMessage",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/log",
       "input": {
        "flowInfo": "false",
        "addToFlow": "false"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"received request: \", $flow.txID, \" - \", $flow.txTime)"
         }
        ]
       }
      }
     },
     {
      "id": "Return",
      "name": "Return",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['txn_id']",
          "type": "assign",
          "value": "$flow.txID"
         },
         {
          "mapTo": "$INPUT['txn_time']",
          "type": "assign",
          "value": "$flow.txTime"
         },
         {
          "mapTo": "$INPUT['user_txn_id']",
          "type": "assign",
          "value": "$flow.parameters.user_txn_id"
         },
         {
          "mapTo": "$INPUT['data']",
          "type": "assign",
          "value": "$flow.parameters.data"
         },
         {
          "mapTo": "$INPUT['hash_type']",
          "type": "assign",
          "value": "$flow.parameters.hash_type"
         },
         {
          "mapTo": "$INPUT['hash_value']",
          "type": "assign",
          "value": "$flow.parameters.hash_value"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage",
      "to": "Return",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "parameters",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}"
       }
      },
      {
       "name": "txID",
       "type": "string"
      },
      {
       "name": "txTime",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "txn_id",
       "type": "string"
      },
      {
       "name": "txn_time",
       "type": "string"
      },
      {
       "name": "user_txn_id",
       "type": "string"
      },
      {
       "name": "data",
       "type": "string"
      },
      {
       "name": "hash_type",
       "type": "string"
      },
      {
       "name": "hash_value",
       "type": "string"
      }
     ]
    }
   }
  },
  {
   "id": "flow:put_records",
   "data": {
    "name": "put_records",
    "description": "",
    "tasks": [
     {
      "id": "LogMessage1",
      "name": "LogMessage1",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/log",
       "input": {
        "flowInfo": "false",
        "addToFlow": "false"
       },
       "output": {},
       "mappings": {
        "input": [
         {
          "mapTo": "$INPUT['message']",
          "type": "expression",
          "value": "string.concat(\"Received request \", $flow.txID)"
         }
        ]
       }
      }
     },
     {
      "id": "Return1",
      "name": "Return1",
      "activity": {
       "ref": "github.com/TIBCOSoftware/flogo-contrib/activity/actreturn",
       "input": {
        "mappings": [
         {
          "mapTo": "$INPUT['records']",
          "type": "array",
          "value": "{\"to\":\"$INPUT['records']\",\"from\":\"$flow.parameters.records\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['txn_id']\",\"from\":\"$flow.txID\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['txn_time']\",\"from\":\"$flow.txTime\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['sequence']\",\"from\":1,\"type\":\"literal\"},{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_type']\",\"from\":\"SHA256\",\"type\":\"literal\"},{\"to\":\"$INPUT.$$['hash_value']\",\"from\":\"Hash-generated\",\"type\":\"literal\"}]}"
         }
        ]
       },
       "output": {}
      }
     }
    ],
    "links": [
     {
      "id": 1,
      "from": "LogMessage1",
      "to": "Return1",
      "type": "default"
     }
    ],
    "metadata": {
     "input": [
      {
       "name": "parameters",
       "type": "complex_object",
       "value": {
        "value": "",
        "metadata": "{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"}}}}}"
       }
      },
      {
       "name": "txID",
       "type": "string"
      },
      {
       "name": "txTime",
       "type": "string"
      }
     ],
     "output": [
      {
       "name": "records",
       "type": "array"
      }
     ]
    }
   }
  }
 ],
 "triggers": [
  {
   "ref": "github.com/yxuco/flogo-enterprise-app/fabric/trigger/transaction",
   "name": "HyperledgerFabricTransaction",
   "description": "",
   "settings": {},
   "id": "HyperledgerFabricTransaction",
   "handlers": [
    {
     "description": "",
     "settings": {
      "name": "put_record",
      "validation": false
     },
     "outputs": {
      "parameters": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"},\"hash_type\":{\"type\":\"string\"},\"hash_value\":{\"type\":\"string\"}}}",
       "value": ""
      },
      "txID": "",
      "txTime": "",
      "_chaincode_stub": ""
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:put_record"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['parameters']['user_txn_id']",
         "type": "assign",
         "value": "$.parameters.user_txn_id"
        },
        {
         "mapTo": "$INPUT['parameters']['data']",
         "type": "assign",
         "value": "$.parameters.data"
        },
        {
         "mapTo": "$INPUT['parameters']['hash_type']",
         "type": "assign",
         "value": "$.parameters.hash_type"
        },
        {
         "mapTo": "$INPUT['parameters']['hash_value']",
         "type": "assign",
         "value": "$.parameters.hash_value"
        },
        {
         "mapTo": "$INPUT['txID']",
         "type": "assign",
         "value": "$.txID"
        },
        {
         "mapTo": "$INPUT['txTime']",
         "type": "assign",
         "value": "$.txTime"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['returns']['txn_id']",
         "type": "assign",
         "value": "$.txn_id"
        },
        {
         "mapTo": "$INPUT['returns']['txn_time']",
         "type": "assign",
         "value": "$.txn_time"
        },
        {
         "mapTo": "$INPUT['returns']['user_txn_id']",
         "type": "assign",
         "value": "$.user_txn_id"
        },
        {
         "mapTo": "$INPUT['returns']['data']",
         "type": "assign",
         "value": "$.data"
        },
        {
         "mapTo": "$INPUT['returns']['hash_type']",
         "type": "assign",
         "value": "$.hash_type"
        },
        {
         "mapTo": "$INPUT['returns']['hash_value']",
         "type": "assign",
         "value": "$.hash_value"
        }
       ]
      }
     }
    },
    {
     "description": "",
     "settings": {
      "name": "put_records",
      "validation": false
     },
     "outputs": {
      "parameters": {
       "metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"user_txn_id\":{\"type\":\"string\"},\"data\":{\"type\":\"string\"}}}}}}",
       "value": ""
      },
      "txID": "",
      "txTime": "",
      "_chaincode_stub": ""
     },
     "action": {
      "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
      "data": {
       "flowURI": "res://flow:put_records"
      },
      "mappings": {
       "input": [
        {
         "mapTo": "$INPUT['parameters']['records']",
         "type": "array",
         "value": "{\"to\":\"$INPUT['parameters']['records']\",\"from\":\"$.parameters.records\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"}]}"
        },
        {
         "mapTo": "$INPUT['txID']",
         "type": "assign",
         "value": "$.txID"
        },
        {
         "mapTo": "$INPUT['txTime']",
         "type": "assign",
         "value": "$.txTime"
        }
       ],
       "output": [
        {
         "mapTo": "$INPUT['returns']['records']",
         "type": "array",
         "value": "{\"to\":\"$INPUT['returns']['records']\",\"from\":\"$.records\",\"type\":\"foreach\",\"fields\":[{\"to\":\"$INPUT.$$['txn_id']\",\"from\":\"$.txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['txn_time']\",\"from\":\"$.txn_time\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['sequence']\",\"from\":\"$.sequence\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['user_txn_id']\",\"from\":\"$.user_txn_id\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['data']\",\"from\":\"$.data\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_type']\",\"from\":\"$.hash_type\",\"type\":\"assign\"},{\"to\":\"$INPUT.$$['hash_value']\",\"from\":\"$.hash_value\",\"type\":\"assign\"}]}"
        }
       ]
      }
     }
    }
   ]
  }
 ],
 "properties": [],
 "ui": "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",
 "contrib": "W3sicmVmIjoiZ2l0aHViLmNvbS95eHVjby9mbG9nby1lbnRlcnByaXNlLWFwcC9mYWJyaWMiLCJzM2xvY2F0aW9uIjoie1VTRVJJRH0vZmFicmljIn0seyJyZWYiOiJnaXRodWIuY29tL1RJQkNPU29mdHdhcmUvZmxvZ28tY29udHJpYi9hY3Rpdml0eS9sb2ciLCJzM2xvY2F0aW9uIjoie1VTRVJJRH0vRGVmYXVsdC9hY3Rpdml0eS9sb2cifV0="
}